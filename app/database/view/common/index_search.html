<fieldset>

    <legend>条件搜索</legend>

    <form class="layui-form layui-form-pane form-search" action="{:request()->url()}" onsubmit="return false" method="get" autocomplete="off">

        <div class="layui-form-item layui-inline">
            <label class="layui-form-label">分类</label>
            <div class="layui-input-inline">
                <select id="type_id" name="type_id" class="layui-select">
                    <option value="all">全部</option>
                </select>
            </div>
        </div>

        <div class="layui-form-item layui-inline">
            <label class="layui-form-label">上传时间</label>
            <div class="layui-input-inline">
                <input data-date-range name="date" value="{:input('get.date')}" placeholder="请选择上传时间" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item layui-inline">
            <button class="layui-btn layui-btn-primary"><i class="layui-icon">&#xe615;</i> 搜 索</button>
        </div>
    </form>

</fieldset>

<script>
    $.ajax({
        url:"{:url('typeList')}",
        method:"GET",
        success:function(data){
            data = JSON.parse(data);
            var type_idElement = document.getElementById("type_id");
            var value = "{:input('get.type_id')}";
            for(var i = 0;i < data.length;i++){
                var option = document.createElement("option");
                option.setAttribute("value",data[i]["type_id"]);
                option.innerText = data[i]["type"];
                if(value == data[i]["type_id"]){
                    option.selected = true;
                }
                type_idElement.append(option);
            }
            form.render();
        }
    });
    form.render();
</script>
